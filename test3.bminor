// tests strings and string comparisions
// and use of strings as local variables

str:string = "hello";
str2:string = " world";

main:function integer () =
{
	str3:string = str;
	if(str == str3)
	{
		print str;
	}
	else
	{
		print "shouldn't be printed";
	}
	if(str != str2)
	{
		print str2;
	}
	else
	{
		print "shouldn't be printed";
	}
}

/*

.arch armv8-a
.file   "output.s"

.data
        .global str
        .align 8
str:    .string "hello"
.data
        .global str2
        .align 8
str2:   .string " world"
.text
        .global main
        main:
                stp     x29, x30, [sp, #-72]!
                adrp    x9, str
                add     x9, x9, :lo12:str
                adrp    x10, .LSVAR1
                add     x10, x10, :lo12:.LSVAR1
                ldrb    w0, [x9, 0]
                strb    w0, [x10, 0]
                ldrb    w0, [x9, 1]
                strb    w0, [x10, 1]
                ldrb    w0, [x9, 2]
                strb    w0, [x10, 2]
                ldrb    w0, [x9, 3]
                strb    w0, [x10, 3]
                ldrb    w0, [x9, 4]
                strb    w0, [x10, 4]
                ldrb    w0, [x9, 5]
                strb    w0, [x10, 5]
                ldrb    w0, [x9, 6]
                strb    w0, [x10, 6]
                ldrb    w0, [x9, 7]
                strb    w0, [x10, 7]
                ldrb    w0, [x9, 8]
                strb    w0, [x10, 8]
                ldrb    w0, [x9, 9]
                strb    w0, [x10, 9]
                ldrb    w0, [x9, 10]
                strb    w0, [x10, 10]
                ldrb    w0, [x9, 11]
                strb    w0, [x10, 11]
                ldrb    w0, [x9, 12]
                strb    w0, [x10, 12]
                ldrb    w0, [x9, 13]
                strb    w0, [x10, 13]
                ldrb    w0, [x9, 14]
                strb    w0, [x10, 14]
                ldrb    w0, [x9, 15]
                strb    w0, [x10, 15]
                ldrb    w0, [x9, 16]
                strb    w0, [x10, 16]
                ldrb    w0, [x9, 17]
                strb    w0, [x10, 17]
                ldrb    w0, [x9, 18]
                strb    w0, [x10, 18]
                ldrb    w0, [x9, 19]
                strb    w0, [x10, 19]
                ldrb    w0, [x9, 20]
                strb    w0, [x10, 20]
                ldrb    w0, [x9, 21]
                strb    w0, [x10, 21]
                ldrb    w0, [x9, 22]
                strb    w0, [x10, 22]
                ldrb    w0, [x9, 23]
                strb    w0, [x10, 23]
                ldrb    w0, [x9, 24]
                strb    w0, [x10, 24]
                ldrb    w0, [x9, 25]
                strb    w0, [x10, 25]
                ldrb    w0, [x9, 26]
                strb    w0, [x10, 26]
                ldrb    w0, [x9, 27]
                strb    w0, [x10, 27]
                ldrb    w0, [x9, 28]
                strb    w0, [x10, 28]
                mov     w0, 0
                strb    w0, [x10, 29]
                adrp    x9, str
                add     x9, x9, :lo12:str
                adrp    x10, .LSVAR1
                add     x10, x10, :lo12:.LSVAR1
                mov     x11, 0
        .LSTMT1:
                ldrb    w0, [x9, x11]
                ldrb    w1, [x10, x11]
                cmp     w0, w1
                b.ne    .LSTMT3
                cmp     w0, 0
                b.eq    .LSTMT2
                add     x11, x11, 1
                b       .LSTMT1
        .LSTMT3:
                mov     x11, 0
                b       .LSTMT4
        .LSTMT2:
                mov     x11, 1
        .LSTMT4:
                cmp     x11, 0
                b.eq    .LSTMT5
                adrp    x9, str
                add     x9, x9, :lo12:str
                mov     x0, x9
                bl      print_string
                b       .LSTMT6
        .LSTMT5:
                adrp    x9, .LSLIT1
                add     x9, x9, :lo12:.LSLIT1
                mov     x0, x9
                bl      print_string
        .LSTMT6:
                adrp    x9, str
                add     x9, x9, :lo12:str
                adrp    x10, str2
                add     x10, x10, :lo12:str2
                mov     x11, 0
        .LSTMT7:
                ldrb    w0, [x9, x11]
                ldrb    w1, [x10, x11]
                cmp     w0, w1
                b.ne    .LSTMT8
                cmp     w0, 0
                b.eq    .LSTMT9
                add     x11, x11, 1
                b       .LSTMT7
        .LSTMT9:
                mov     x11, 0
                b       .LSTMT10
        .LSTMT8:
                mov     x11, 1
        .LSTMT10:
                cmp     x11, 0
                b.eq    .LSTMT11
                adrp    x9, str2
                add     x9, x9, :lo12:str2
                mov     x0, x9
                bl      print_string
                b       .LSTMT12
        .LSTMT11:
                adrp    x9, .LSLIT2
                add     x9, x9, :lo12:.LSLIT2
                mov     x0, x9
                bl      print_string
        .LSTMT12:
                ldp     x29, x30, [sp], #72
                ret
        .section        .data
        .align 8
.LSVAR1:
        .string "\0"
        .section        .rodata
        .align 8
.LSLIT1:
        .string "shouldn't be printed"
        .section        .rodata
        .align 8
.LSLIT2:
        .string "shouldn't be printed"
*/